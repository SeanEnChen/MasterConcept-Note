# 8.4.3 Different RAG Patterns and Implementations

**核心主題：介紹除了基本的 RAG 之外，還有其他不同的 RAG 實作風格，並詳細說明 ReAct (推理+行動) 模式。**

**不同的 RAG 實作風格：**

1. **檢索優先 (Retrieval-First) 風格**：
    
    - **描述**：這是課程到目前為止主要探討的風格，即「先檢索相關文件 -> 增強提示 -> 生成答案」。
    - **適用場景**：非常適合**資訊探索 (Information Discovery)**、需要從**可信賴來源**獲取資訊的情況。
    - **舉例**：搜尋特定產品、尋找醫生資訊、查找關於癌症或永續性等主題的最新研究。
2. **Gemini 風格 / 搜尋外掛程式 / ReAct 風格**：
    
    - **描述**：更適合需要**多輪、生成式對話**的場景。它將**搜尋**視為一種**工具或手段**，在需要時主動去尋找明確答案，而非僅從固定知識庫檢索。可能整合多種 API 或外部服務（如 Google Drive, YouTube 等外掛程式）。
    - **底層機制**：這種風格常與 **ReAct (Reason + Act / 推理 + 行動)** 模式結合使用。

**深入了解 ReAct (推理 + 行動) 模式：**

- **核心概念**：將大型語言模型 (LLM) 變成一個**代理人 (Agent)**。這個代理人不僅能理解語言，還能**思考 (Reason)** 如何解決問題，並**採取行動 (Act)**（通常是呼叫外部工具）來收集資訊，最後才給出答案。
- **核心循環：思考 -> 行動 -> 觀察 (Thought -> Action -> Observation)**：
    
    1. **思考 (Thought)**：LLM 接收到提示後，內部進行推理，判斷需要哪些額外資訊，以及如何獲取這些資訊。
    2. **行動 (Action)**：根據思考結果，LLM 決定執行一個具體行動，通常是**制定一個對外部系統的呼叫**（例如：呼叫一個 API、查詢資料庫、執行雲端函數、進行網路搜尋等）。
    3. **觀察 (Observation)**：LLM 接收並處理從外部系統呼叫**返回的結果或回應**。
    
    - **重複循環**：這個「思考 -> 行動 -> 觀察」的循環可以**重複多次**。LLM 會根據上一步的「觀察」結果，產生新的「思考」，可能決定採取進一步的「行動」來獲取更多資訊或 уточнення。
    - **最終答案**：直到 LLM 根據累積的「觀察」結果，判斷已經擁有足夠的資訊來回答原始問題時，它會產生一個最終的「思考」，這個思考直接導向答案，並且**不再產生下一步的「行動」**，循環結束。

**ReAct 範例：用兒童能懂的方式解釋 Google Pixel 8 手機功能**

1. **使用者提示**：「用小朋友能理解的方式向我解釋 Google Pixel 8 手機的功能」。
2. **LLM 思考 1**：「我需要 Google Pixel 8 的功能資訊，但我本身的知識庫可能不夠新或不夠詳細。」
3. **LLM 行動 1**：決定呼叫一個外部 API（例如產品規格資料庫或網路搜尋）來查詢 "Google Pixel 8 features"。
4. **LLM 觀察 1**：從外部 API 獲取了 Pixel 8 的技術規格（例如：螢幕尺寸、相機畫素、處理器型號等）。
5. **LLM 思考 2**：「這些技術規格對小朋友來說太複雜了，我需要把它們轉換成簡單易懂的描述。」
6. **LLM 行動 2**：（這一步可能是內部處理或再次呼叫外部工具）LLM 根據觀察 1 的技術規格，開始**生成或改寫**成兒童化的描述。
7. **LLM 觀察 2**：（內部觀察到）兒童化的描述已經準備好了（例如：「它有很棒的大螢幕可以看卡通，還有很厲害的照相機可以把你的玩具拍得很清楚喔！」）。
8. **LLM 思考 3**：「我現在有簡單的描述了，可以回答使用者的問題了。」 (不再需要新的行動)
9. **最終答案**：LLM 輸出兒童化的手機功能解釋。

**總結：**

RAG 的實作方式多樣。除了基礎的「檢索優先」模式適用於資訊查找外，還有類似「Gemini 風格」或基於「ReAct」模式的進階方法。ReAct 讓 LLM 像一個能思考、能行動的代理人，可以透過呼叫外部工具來主動收集和處理資訊，以回答更複雜或需要外部即時知識的問題，這使得 RAG 系統更加強大和靈活。